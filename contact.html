<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Olive Elements Blog</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Template Stylesheet -->
  <link href="css/admin.css" rel="stylesheet" />
</head>

<body>
  <div class="d-flex">

    <!-- Sidebar -->
    <aside class="sidebar p-4 d-flex flex-column">
      <div class="d-flex align-items-center mb-4">
        <img src="img/logo.png" class="me-2" width="40" alt="Logo">
        <h5 class="m-0">Olive Elements</h5>
      </div>
      <nav class="nav flex-column mb-4">
        <a class="nav-link active" href="about.html">Dashboard</a>
        <a class="nav-link" href="events_admin.html">Campsites</a>
        <a class="nav-link" href="admin_ads.html">Advertisement</a>
        <a class="nav-link" href="blog_admin.html">Blogs</a>
      </nav>
      <h6 class="text-light small">Teams</h6>
      <ul class="list-unstyled small">
        <li class="mb-2"><span class="badge bg-warning me-2">&nbsp;</span> Rangers</li>
        <li><span class="badge bg-success me-2">&nbsp;</span> Explorers</li>
      </ul>
      <div class="mt-auto pt-4">
        <a href="#" class="d-block mb-2 text-light">âš™ Settings</a>
        <a href="#" class="d-block text-light">ðŸšª Log Out</a>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-grow-1 p-4">
  <h2>Advertisement Manager</h2>
  <div class="form-check form-switch mb-3">
    <input class="form-check-input" type="checkbox" id="toggleAds">
    <label class="form-check-label" for="toggleAds">Enable Ads Popup</label>
  </div>

  <form id="adForm" class="mb-4">
    <div class="mb-2">
      <label>Upload Image</label>
      <input type="file" id="adImage" accept="image/*" class="form-control">
    </div>
    <div class="mb-2">
      <label>Description</label>
      <textarea id="adDesc" class="form-control"></textarea>
    </div>
    <button type="submit" class="btn btn-primary">Add Ad</button>
  </form>

  <h4>Current Ads</h4>
  <div id="adsList" class="row g-3"></div>

    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- Ads  -->
  <script>
    let ads = JSON.parse(localStorage.getItem("ads")) || [];

    function renderAds() {
      let container = document.getElementById("adsList");
      container.innerHTML = "";
      ads.forEach((ad, index) => {
        container.innerHTML += `
          <div class="col-md-4">
            <div class="card">
              <img src="${ad.image}" class="card-img-top">
              <div class="card-body">
                <p>${ad.description}</p>
                <button class="btn btn-sm btn-warning" onclick="editAd(${index})">Edit</button>
                <button class="btn btn-sm btn-danger" onclick="deleteAd(${index})">Delete</button>
              </div>
            </div>
          </div>
        `;
      });
      localStorage.setItem("ads", JSON.stringify(ads));
    }

    // Enable/Disable toggle
    let toggleAds = document.getElementById("toggleAds");
    toggleAds.checked = localStorage.getItem("adsEnabled") === "true";
    toggleAds.addEventListener("change", function () {
      localStorage.setItem("adsEnabled", this.checked);
    });

    // Add new ad
    document.getElementById("adForm").addEventListener("submit", function (e) {
      e.preventDefault();
      let file = document.getElementById("adImage").files[0];
      let desc = document.getElementById("adDesc").value;

      if (!file) return alert("Please upload an image");

      let reader = new FileReader();
      reader.onload = function (e) {
        ads.push({ image: e.target.result, description: desc });
        renderAds();
      };
      reader.readAsDataURL(file);

      this.reset();
    });

    // Edit Ad
    function editAd(index) {
      let newDesc = prompt("Edit Description:", ads[index].description);
      if (newDesc !== null) {
        ads[index].description = newDesc;
        renderAds();
      }
    }

    // Delete Ad
    function deleteAd(index) {
      if (confirm("Delete this ad?")) {
        ads.splice(index, 1);
        renderAds();
      }
    }

    renderAds();
  </script>
</body>

</html>